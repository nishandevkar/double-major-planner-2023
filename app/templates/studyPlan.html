{% extends "base.html" %}

{% block content %}

<table class="table">
    <thead>
        <tr>
            <th>Year/Sem</th>
            <th>Unit 1</th>
            <th>Unit 2</th>
            <th>Unit 3</th>
            <th>Unit 4</th>
            <th>Action</th>
        </tr>
    </thead>
    <tbody>
        {% for sem_level, unit_list in units.items() %}
            <tr>
                <td>{{ sem_level }}</td>
                {% for unit in unit_list %}
                    <td>
                        <strong>{{ unit[0] }} - {{ unit[1] }}</strong><br> <!-- Code - Title -->
                        Level: {{ unit[2] }}<br>
                        Major: {{ unit[3] }}<br>
                        {% if unit[4] != 'Nil.' %}Prerequisites: {{ unit[4] }}<br>{% endif %}
                        {% if unit[5] == 1 %}Core Unit<br>{% endif %}Credits: 6 points<br>
                        {% if unit[6] == 'true' %}Available in Sem 1<br>{% endif %}
                        {% if unit[7] == 'true' %}Available in Sem 2<br>{% endif %}
                    </td>
                {% endfor %}
                <!-- 如果unit_list不足4个，用空的td填充 -->
                {% for _ in range(4 - unit_list|length) %}
                    <td></td>
                {% endfor %}
                <td><button class="btn btn-primary add-unit-btn" onclick="addUnit(this)">Add Unit</button></td>
            </tr>
        {% endfor %}
    </tbody>
</table>


<script type="text/javascript">
    function addUnit(buttonElement) {
        // 找到按钮所在的行
        var row = buttonElement.parentElement.parentElement;
        
        // 创建并添加新的单元格
        var newCell = row.insertCell(-2);  // 在倒数第二个位置插入单元格（即在按钮前）
        newCell.innerHTML = "New Unit";
    }
</script>


{% endblock %}
